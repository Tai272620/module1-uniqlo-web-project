let listProductsStock = [
    {
        img: "./assets/images/productItems/women1black.avif",
        name: "AIRism Cotton T (short sleeve)",
        price: 14.90,
        type: "WOMEN",
        options: [
            {
                src: "./assets/images/productItems/women1black.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    }
                ],
            },
            {
                src: "./assets/images/productItems/women1navy.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    }
                ],
            },
            {
                src: "./assets/images/productItems/women1white.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    }
                ],
            },
        ],
    },
    {
        img: "./assets/images/productItems/women2blue.avif",
        name: "Smooth Stretch Cotton Crew Neck Long-Sleeve T-Shirt",
        price: 24.90,
        type: "WOMEN",
        options: [
            {
                src: "./assets/images/productItems/women2blue.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/women2pink.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/women2wine.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/women3blue.avif",
        name: "AIRism Seamless Boat Neck Long T (Short Sleeve)",
        price: 29.90,
        type: "WOMEN",
        options: [
            {
                src: "./assets/images/productItems/women3blue.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/women3green.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/women3yellow.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/women4blue.avif",
        name: "UV cut crew neck cardigan (long sleeve)",
        price: 39.90,
        type: "WOMEN",
        options: [
            {
                src: "./assets/images/productItems/women4blue.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/women4pink.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {

        img: "./assets/images/productItems/women5bluecaro.avif",
        name: "Slub Jersey Striped Cropped T-Shirt",
        price: 9.90,
        type: "WOMEN",
        options: [
            {
                src: "./assets/images/productItems/women5bluecaro.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/women5blackcaro.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {

        img: "./assets/images/productItems/women6blue.avif",
        name: "Ribbed Racer Back Cropped Tank Top",
        price: 9.90,
        type: "WOMEN",
        options: [
            {
                src: "./assets/images/productItems/women6blue.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/women6green.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/women6pink.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {

        img: "./assets/images/productItems/women7black.avif",
        name: "AirSense Jacket (Ultra Light Jacket)",
        price: 79.90,
        type: "WOMEN",
        options: [
            {
                src: "./assets/images/productItems/women7black.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/women7brown.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/women7navy.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {

        img: "./assets/images/productItems/women8blue.avif",
        name: "Pleated Striped Mini Skirt (JW Anderson)",
        price: 19.90,
        type: "WOMEN",
        options: [
            {
                src: "./assets/images/productItems/women8blue.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/women8navy.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/men1black.avif",
        name: "U AIRism Cotton Crew Neck Oversized Half-Sleeve T-Shirt",
        price: 14.90,
        type: "MEN",
        options: [
            {
                src: "./assets/images/productItems/men1black.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men1green.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men1brown.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/men2black.avif",
        name: "RF Short-Sleeve Graphic T-Shirt",
        price: 29.90,
        type: "MEN",
        options: [
            {
                src: "./assets/images/productItems/men2black.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men2white.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men2purple.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/men3yellow.avif",
        name: "Waffle Long-Sleeve Henley T-Shirt",
        price: 29.90,
        type: "MEN",
        options: [
            {
                src: "./assets/images/productItems/men3yellow.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men3gray.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men3black.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/men4olive.avif",
        name: "Smart Ankle Pants (2-Way Stretch Cotton, Tall)",
        price: 39.90,
        type: "MEN",
        options: [
            {
                src: "./assets/images/productItems/men4olive.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men4gray.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men4beige.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/men5olive.avif",
        name: "Cargo Jogger Pants",
        price: 49.90,
        type: "MEN",
        options: [
            {
                src: "./assets/images/productItems/men5olive.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men5gray.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men5grown.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/men6white.avif",
        name: "Ultra Stretch DRY-EX Shorts",
        price: 29.90,
        type: "MEN",
        options: [
            {
                src: "./assets/images/productItems/men6white.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men6gray.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men6blue.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/men7white.avif",
        name: "Fluffy Yarn Fleece Full-Zip Jacket",
        price: 39.90,
        type: "MEN",
        options: [
            {
                src: "./assets/images/productItems/men7white.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men7black.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men7navy.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/men8darkbrown.avif",
        name: "Single Collar Short Blouson",
        price: 29.90,
        type: "MEN",
        options: [
            {
                src: "./assets/images/productItems/men8darkbrown.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/men8navy.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/kid1blue.avif",
        name: "Pocket UV Protector Parka (Sun Protection)",
        price: 19.90,
        type: "KIDS",
        options: [
            {
                src: "./assets/images/productItems/kid1blue.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/kid1pink.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/kid1white.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/kid2blue.avif",
        name: "Fluffy Yarn Fleece Full-Zip Jacket",
        price: 29.90,
        type: "KIDS",
        options: [
            {
                src: "./assets/images/productItems/kid2blue.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/kid2green.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/kid2pink.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/kid3brown.avif",
        name: "Baseball jacketBaseball jacket",
        price: 39.90,
        type: "KIDS",
        options: [
            {
                src: "./assets/images/productItems/kid3brown.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/kid3green.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/kid3navy.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/kid4green.avif",
        name: "U AIRism Cotton Crew Neck Short-Sleeve T-Shirt",
        price: 14.90,
        type: "KIDS",
        options: [
            {
                src: "./assets/images/productItems/kid4green.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/kid4pink.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/kid4blue.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/kid5white.avif",
        name: "Easy Color Shorts",
        price: 19.90,
        type: "KIDS",
        options: [
            {
                src: "./assets/images/productItems/kid5white.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/kid5black.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/kid6blue.avif",
        name: "Baggy Jeans",
        price: 29.90,
        type: "KIDS",
        options: [
            {
                src: "./assets/images/productItems/kid6blue.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/kid6navy.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/kid7black.avif",
        name: "Ultra Stretch Sweatpants (Varsity Logo)",
        price: 24.90,
        type: "KIDS",
        options: [
            {
                src: "./assets/images/productItems/kid7black.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/kid7navy.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/kid7gray.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/kid8navy.avif",
        name: "Ultra Stretch Long-Sleeve Sweatshirt",
        price: 24.90,
        type: "KIDS",
        options: [
            {
                src: "./assets/images/productItems/kid8navy.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/kid8gray.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/baby1green.avif",
        name: "AIRism Long Sleeve UV Protection Jacket (Sun Protection)",
        price: 29.90,
        type: "BABY",
        options: [
            {
                src: "./assets/images/productItems/baby1green.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/baby1pink.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/baby1white.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/baby2blue.avif",
        name: "Joy Of Print Bodysuit Long Sleeve",
        price: 19.90,
        type: "BABY",
        options: [
            {
                src: "./assets/images/productItems/baby2blue.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/baby2red.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/baby2white.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ],
    },
    {
        img: "./assets/images/productItems/baby3red.avif",
        name: "Joy Of Print Long Sleeve One Pieces",
        price: 19.90,
        type: "BABY",
        options: [
            {
                src: "./assets/images/productItems/baby3red.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/baby3yellow.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/baby4blue.avif",
        name: "Dress",
        price: 19.90,
        type: "BABY",
        options: [
            {
                src: "./assets/images/productItems/baby4blue.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/baby4brown.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/baby5red.avif",
        name: "Short-Sleeve Bodysuit",
        price: 7.90,
        type: "BABY",
        options: [
            {
                src: "./assets/images/productItems/baby5red.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/baby5black.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/baby6white.avif",
        name: "Cotton Mesh Sleeveless Bodysuit (Open Front)",
        price: 7.90,
        type: "BABY",
        options: [
            {
                src: "./assets/images/productItems/baby6white.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/baby6gray.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/baby7.webp",
        name: "Light Warm Padded Washable Full-Zip Parka",
        price: 49.90,
        type: "BABY",
        options: [
            {
                src: "./assets/images/productItems/baby7.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/baby7yellow.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/baby7navy.avif",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    },
    {
        img: "./assets/images/productItems/baby8black.webp",
        name: "Dry Easy Balloon Shorts",
        price: 14.90,
        type: "BABY",
        options: [
            {
                src: "./assets/images/productItems/baby8black.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            },
            {
                src: "./assets/images/productItems/baby8red.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 1
                    },
                    {
                        key: "M",
                        stock: 1
                    },
                    {
                        key: "L",
                        stock: 1
                    },
                ]
            }
        ]
    }
]

function uuid() {
    return new Date().getMilliseconds() + Math.floor(Math.random() * 999999999);
}

for (let i = 0; i < listProductsStock.length; i++) {
    listProductsStock[i].id = uuid();
    listProductsStock[i].quantity = 1;
}


for (let i = 0; i < listProductsStock.length; i++) {
    for (let j = 0; j < listProductsStock[i].options.length; j++) {
        listProductsStock[i].options[j].idOption = uuid();
    }
}

// localStorage.setItem("listProducts", JSON.stringify(listProductsStock));

// Hàm convert tiền tệ

const USDollar = new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD',
});
const VND = new Intl.NumberFormat('vi-VN', {
    style: 'currency',
    currency: 'VND',
});

window.onload = function () {
    const bar = document.getElementById("bar");
    const close = document.getElementById("close");
    const nav = document.getElementById("navbar");

    if (bar) {
        bar.addEventListener("click", () => {
            nav.classList.add("active");
        });
    }

    if (close) {
        close.addEventListener("click", () => {
            nav.classList.remove("active");
        });
    }
};

// Create a Fixed Header on Scroll
window.onscroll = function () { myFunction() };

let header = document.querySelector(".nagivation-container");
let sticky = header.offsetTop;

function myFunction() {
    if (window.pageYOffset > sticky) {
        header.classList.add("sticky");
    } else {
        header.classList.remove("sticky");
    }
}

// Hàm hiển thị banner
let slideIndex = 1;
// call showDivs() to display the first image
showDivs(slideIndex);

function plusDivs(n) {
    showDivs(slideIndex += n);
}

// The showDiv() function hides (display="none") all elements with the class name "mySlides", 
// and displays (display="block") the element with the given slideIndex
function showDivs(n) {
    let i;
    let x = document.getElementsByClassName("mySlides");
    if (n > x.length) { slideIndex = 1 }
    if (n < 1) { slideIndex = x.length }
    // Hides (display="none") all elements with the class name "mySlides"
    for (i = 0; i < x.length; i++) {
        x[i].style.display = "none";
    }
    x[slideIndex - 1].style.display = "block";
}

// Hàm tìm kiếm sản phẩm

function searchProduct() {
    document.querySelector(".search-input").style.visibility = "visible";
}

function closeSearchProduct() {
    document.querySelector(".search-input").style.visibility = "hidden";
}

function deleteSearchInput() {
    document.querySelector(".search-product").value = "";
    document.querySelector(".searchProduct-container").innerHTML = "";
    document.querySelector(".content-container").style.opacity = 1;
}

function searchInputProduct() {
    let listProducts = JSON.parse(localStorage.getItem("listProducts"));
    let valueInputSearch = document.querySelector(".search-product").value;
    console.log(valueInputSearch);
    let resultSearch = []

    let userSearch = listProducts.filter((item) => {
        return item.name.toUpperCase().includes(valueInputSearch.toUpperCase())
    })

    renderSearchInputProduct(userSearch);
}

// Hàm xử lí khi người dùng xoá hết dữ liệu trong ô input thì ẩn vùng hiển thị sản phẩm người dùng đã tìm kiếm
document.querySelector(".search-product").addEventListener("input", handleInputClear);

function handleInputClear() {
    let valueInputSearch = document.querySelector(".search-product").value;

    if (valueInputSearch === "") {
        clearSearchResults();
        document.querySelector(".content-container").style.opacity = 1;
    }
}

function clearSearchResults() {
    document.querySelector(".searchProduct-container").innerHTML = "";
}

// Hàm xử lí khi click vào các vùng khác thì ẩn vùng hiển thị sản phẩm người dùng đã tìm kiếm
document.addEventListener("click", handleClickOutside);

function handleClickOutside(event) {
    const searchContainer = document.querySelector(".searchProduct-container");
    const cartProductItem = document.querySelector(".cart-product");
    const target = event.target;

    // Kiểm tra xem người dùng có click vào phần bên ngoài vùng hiển thị sản phẩm người dùng đã tìm kiếm hay không
    if (!searchContainer.contains(target) && !cartProductItem.contains(target)) {
        clearSearchResults();
        document.querySelector(".content-container").style.opacity = 1;
    }
}

// Hàm hiển thị sản phẩm khi người dùng nhập dữ liệu vào ô tìm kiếm

function renderSearchInputProduct(params) {
    let result = "";
    for (let i = 0; i < params.length; i++) {
        result += `
            <div class="seacrh-ProductItem" onclick="renderProductItem('${params[i].id}')">
                <div class="seacrh-ProductItem-image">
                    <img src="${params[i].img}" alt="">
                </div>
                <div class="seacrh-ProductItem-info">
                    <h4>${params[i].name}</h4>
                    <p>${USDollar.format(params[i].price)}</p>
                </div>
            </div>
        `;
    }
    document.querySelector(".searchProduct-container").innerHTML = result;
    document.querySelector(".content-container").style.opacity = 0.5;
}


if (checkLogin()) {
    document.querySelector(".login-button").style.display = "none";
    document.querySelector(".logout-button").style.display = "block";
}

// Hàm hiển thị danh sách sản phẩm
function renderListProducts(params) {
    let result = "";
    for (let i = 0; i < params.length; i++) {
        result += `
            <div class="product-item" onclick="renderProductItem('${params[i].id}')">
                <div class="product-image">
                    <img src="${params[i].img}" alt="">
                </div>
                <div class="product-description">   
                    <div class="product-type">
                        <span>${params[i].type}</span>
                        <span>S-M-L</span>
                    </div>
                    <h4 class="product-name">${params[i].name}</h4>
                    <p>${USDollar.format(params[i].price)}</p>
                </div>
            </div>
            `
    }
    document.querySelector(".content-container").innerHTML = result;
    document.querySelector(".content-container").style.display = "flex";
    document.querySelector(".banner-container").style.display = "none";
    document.querySelector(".footer-container").classList.remove("active-footer");
}

// function renderListProducts(params) {
//     let product = params.find((product) => {
//         return product.stock === 0;
//     });
//     console.log(product);
//     console.log(params);
//     let result = "";
//     for (let i = 0; i < params.length; i++) {
//         let priceHTML = "";
//         let productClass = "product-item";
//         if (params[i].stock === 0) {
//             priceHTML = "<p>Sold Out</p>";
//             productClass += " sold-out"; // Thêm class "sold-out" nếu sản phẩm hết hàng
//         } else {
//             priceHTML = `<p>${USDollar.format(params[i].price)}</p>`;
//         }
//         result += `
//             <div class="${productClass}" onclick="renderProductItem('${params[i].id}')">
//                 <div class="product-image">
//                     <img src="${params[i].img}" alt="">
//                 </div>
//                 <div class="product-description">   
//                     <div class="product-type">
//                         <span>${params[i].type}</span>
//                         <span>S-M-L</span>
//                     </div>
//                     <h4 class="product-name">${params[i].name}</h4>
//                     ${priceHTML}
//                 </div>
//             </div>
//             `;
//     }
//     document.querySelector(".content-container").innerHTML = result;
//     document.querySelector(".content-container").style.display = "grid";
//     document.querySelector(".banner-container").style.display = "none";
// }


function renderListAllProducts() {
    let listProducts = JSON.parse(localStorage.getItem("listProducts"));
    renderListProducts(listProducts);
    document.querySelector(".listPage").style.display = "block";
    pagination();
}

function renderWomenListProducts() {
    let listProducts = JSON.parse(localStorage.getItem("listProducts"));
    let listProductsWomen = [];
    for (let i = 0; i < listProducts.length; i++) {
        if (listProducts[i].type == "WOMEN") {
            listProductsWomen.push(listProducts[i])
        }
    }
    renderListProducts(listProductsWomen);
    document.querySelector(".listPage").style.display = "none";
}

function renderMenListProducts() {
    let listProducts = JSON.parse(localStorage.getItem("listProducts"));
    let listProductsMen = [];
    for (let i = 0; i < listProducts.length; i++) {
        if (listProducts[i].type == "MEN") {
            listProductsMen.push(listProducts[i])
        }
    }
    renderListProducts(listProductsMen);
    document.querySelector(".listPage").style.display = "none";
}

function renderKidsListProducts() {
    let listProducts = JSON.parse(localStorage.getItem("listProducts"));
    let listProductsKids = [];
    for (let i = 0; i < listProducts.length; i++) {
        if (listProducts[i].type == "KIDS") {
            listProductsKids.push(listProducts[i])
        }
    }
    renderListProducts(listProductsKids);
    document.querySelector(".listPage").style.display = "none";
}

function renderBabyListProducts() {
    let listProducts = JSON.parse(localStorage.getItem("listProducts"));
    let listProductsBaby = [];
    for (let i = 0; i < listProducts.length; i++) {
        if (listProducts[i].type == "BABY") {
            listProductsBaby.push(listProducts[i])
        }
    }
    renderListProducts(listProductsBaby);
    document.querySelector(".listPage").style.display = "none";
}

// Hàm hiển thị chi tiết từng sản phẩm

function renderProductItem(idProduct) {

    let listProducts = JSON.parse(localStorage.getItem("listProducts"));
    let productItem = listProducts.find((item) => {
        return item.id == idProduct
    })

    let result = `
        <div class="product">
            <div class="productItem-image">
                <div class="productItem-main-image">
                <img src="${productItem.img}" alt="" class="main-image">
            </div>
                <div class="productItem-image-color">
            
                </div>
            </div>
            <div class="productItem-description">
                <h2>${productItem.name}</h2>
                <h3>${USDollar.format(productItem.price)}</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Sapiente error totam harum iste deserunt
                suscipit enim aliquam nihil veritatis quam minima architecto ad corporis, facere ut veniam et quas
                culpa.
                </p>
                <h4>Size</h4>
                <div>
                    <input type="radio" id="S" value="S" name="size" class="size-option">
                    <label for="S">S</label>
                    <br>
                    <input type="radio" id="M" value="M" name="size" class="size-option">
                    <label for="M">M</label>
                    <br>
                    <input type="radio" id="L" value="L" name="size" class="size-option">
                    <label for="L">L</label>
                </div>
                <button class="addtocart-button" onclick="addToCart('${productItem.id}')">ADD TO CART</button><br>
                <p class="product-idOption">${productItem.options[0].idOption}</p>
                <span class="stock-size-S">Size S available in stock ${productItem.options[0].sizes[0].stock}</span><br>
                <span class="stock-size-M">Size M available in stock ${productItem.options[0].sizes[1].stock}</span><br>
                <span class="stock-size-L">Size L available in stock ${productItem.options[0].sizes[2].stock}</span>
            </div>
        </div>
        `;
    document.querySelector(".content-container").style.display = "flex";
    document.querySelector(".content-container").innerHTML = result;
    document.querySelector(".banner-container").style.display = "none";
    let productItemColor = document.querySelector(".productItem-image-color");

    let productColors = "";
    for (let i = 0; i < productItem.options.length; i++) {

        productColors += `
            <img src="${productItem.options[i].src}" alt="" onclick="changeProductColor(${idProduct}, '${productItem.options[i].src}', '${productItem.options[i].idOption}')">
        `
    }
    productItemColor.innerHTML = productColors;
}

function changeProductColor(idProduct, src, idOption) {
    // console.log(idProduct);
    let listProducts = JSON.parse(localStorage.getItem("listProducts"));
    let product = listProducts.find((product) => {
        return product.id == idProduct;
    })
    let option = product.options.find((option) => {
        return option.idOption == idOption;
    })
    document.querySelector(".main-image").src = `${src}`;
    document.querySelector(".product-idOption").innerHTML = `${idOption}`;

    document.querySelector(".stock-size-S").innerHTML = `Size S available in stock ${option.sizes[0].stock}`;
    document.querySelector(".stock-size-M").innerHTML = `Size M available in stock ${option.sizes[1].stock}`;
    document.querySelector(".stock-size-L").innerHTML = `Size L available in stock ${option.sizes[2].stock}`;
}

// Hàm thêm sản phẩm vào giỏ hàng

function addToCart(idProduct) {
    let checkLogin = localStorage.getItem("checkLogin");

    if (checkLogin == null) {
        showErrorNotLoginToast();
        return;
    }

    let listProducts = JSON.parse(localStorage.getItem("listProducts"));
    let listUsers = JSON.parse(localStorage.getItem("listUsers"));
    let selectedSize = null;
    let idOption = document.querySelector(".product-idOption").innerHTML;

    const sizeOptions = document.querySelectorAll(".size-option");
    for (let i = 0; i < sizeOptions.length; i++) {
        if (sizeOptions[i].checked) {
            selectedSize = sizeOptions[i].value;
            break;
        }
    }

    if (selectedSize === null) {
        showErrorSizeToast();
        return;
    }

    let product = listProducts.find((product) => {
        return product.id == idProduct;
    });

    let option = product.options.find((x) => {
        return x.idOption == idOption
    })

    let imageLink = option.src;
    let productName = product.name;
    let productPrice = product.price;

    for (let i = 0; i < listUsers.length; i++) {
        if (listUsers[i].idUser == checkLogin) {
            let cart = listUsers[i].cartUser;

            // Check if the product with the same idOption and selectedSize already exists in the cart
            let existingProduct = cart.find((item) => {
                return item.idOption == idOption && item.size == selectedSize;
            });

            if (existingProduct) {
                // Increment the quantity if the product already exists
                existingProduct.quantity++;
                localStorage.setItem("listUsers", JSON.stringify(listUsers));
                showCartProductTotal()
            } else {
                // Add the product to the cart with quantity 1, image link, and product name
                cart.push({
                    idProduct: idProduct,
                    idOption: idOption,
                    size: selectedSize,
                    quantity: 1,
                    imageLink: imageLink,
                    productName: productName,
                    productPrice: productPrice
                });
                localStorage.setItem("listUsers", JSON.stringify(listUsers));
                showCartProductTotal()
            }
        }
    }
}


// Hàm hiển thị tổng số lượng sản phẩm trong giỏ hàng
function showCartProductTotal() {
    let listUsers = JSON.parse(localStorage.getItem("listUsers"));
    let checkLogin = localStorage.getItem("checkLogin");

    let user = listUsers.find((item) => {
        return item.idUser == checkLogin;
    })

    let cartUser = user.cartUser;

    let total = cartUser.reduce((total, currentValue) => {
        return total += currentValue.quantity;
    }, 0)

    document.querySelector(".cart-quantity").innerHTML = `${total}`;
}

showCartProductTotal();

// Hàm hiển thị danh sách sản phẩm trong giỏ hàng
function showCartProducts() {
    document.querySelector(".cartProducts-container").style.display = "block";
    document.querySelector(".nagivation-container").style.opacity = 0.5;
    document.querySelector(".content-container").style.opacity = 0.5;
    document.querySelector(".banner-container").style.opacity = 0.5;

    let listUsers = JSON.parse(localStorage.getItem("listUsers"));
    let checkLogin = localStorage.getItem("checkLogin");

    let user = listUsers.find((user) => {
        return user.idUser == checkLogin;
    })

    let cartUser = user.cartUser;

    let result = "";
    for (let i = 0; i < cartUser.length; i++) {
        result += `
            <div class="cartProductItem" id = "cartProductItem_${i}">
                <div class="cartItem">
                    <div class="cartProductItem-image">
                        <img src="${cartUser[i].imageLink}" alt="">
                    </div>
                    <div class="cartProductItem-info">
                        <h4>${cartUser[i].productName}</h4>
                        <p>Product code: ${cartUser[i].idOption}</p>
                        <p>Size: ${cartUser[i].size}</p>
                        <p>${USDollar.format(cartUser[i].productPrice)}</p>
                            <div class="changeQuantity-button">
                                <button>
                                    <span class="material-symbols-outlined" onclick="decreaseItem(${i})">
                                        remove
                                    </span>
                                </button>
                                
                                <span class="productItem-quantity" id="quantity">${cartUser[i].quantity}</span>

                                <button>
                                    <span class="material-symbols-outlined" onclick="increaseItem(${i})">
                                        add
                                    </span>
                                </button>
                            </div>
                    </div>
                </div>
                <div class="cartItem-delete-button" onclick = "deleteCartProductItem(${i})">
                        <span class="material-symbols-outlined">
                            close
                        </span>
                </div>
            </div>
        `;
    }
    document.querySelector(".cartProductItems").innerHTML = result;
    caculateTotalProductsPrice();
}

document.querySelector(".cartProducts-close").addEventListener("click", () => {
    document.querySelector(".cartProducts-container").style.display = "none";
    document.querySelector(".nagivation-container").style.opacity = 1;
    document.querySelector(".content-container").style.opacity = 1;
    document.querySelector(".banner-container").style.opacity = 1;
})


// Hàm tăng số lượng sản phẩm

function increaseItem(index) {
    let listUsers = JSON.parse(localStorage.getItem("listUsers"));
    let checkLogin = localStorage.getItem("checkLogin");

    // Find the user in listUsers
    for (let i = 0; i < listUsers.length; i++) {
        if (listUsers[i].idUser == checkLogin) {
            let cartUser = listUsers[i].cartUser;
            for (let j = 0; j < cartUser.length; j++) {
                if (j == index) {
                    cartUser[j].quantity += 1;
                    localStorage.setItem("listUsers", JSON.stringify(listUsers));
                    showCartProducts();
                    showCartProductTotal();
                    caculateTotalProductsPrice();
                    return;
                }
            }
        }
    }
}

// Hàm giảm số lượng sản phẩm

function decreaseItem(index) {
    let listUsers = JSON.parse(localStorage.getItem("listUsers"));
    let checkLogin = localStorage.getItem("checkLogin");

    for (let i = 0; i < listUsers.length; i++) {
        if (listUsers[i].idUser == checkLogin) {
            let cartUser = listUsers[i].cartUser;
            for (let j = 0; j < cartUser.length; j++) {
                if (cartUser[index].quantity > 1) {
                    cartUser[index].quantity -= 1;
                    localStorage.setItem("listUsers", JSON.stringify(listUsers));
                    showCartProducts();
                    showCartProductTotal();
                    caculateTotalProductsPrice();
                    return;
                } else {
                    cartUser.splice(index, 1);
                    localStorage.setItem("listUsers", JSON.stringify(listUsers));
                    showCartProducts();
                    showCartProductTotal();
                    caculateTotalProductsPrice();
                    return;
                }
            }
        }
    }
}


// Hàm xoá sản phẩm trong giỏ hàng

function deleteCartProductItem(index) {
    let listUsers = JSON.parse(localStorage.getItem("listUsers"));
    let checkLogin = localStorage.getItem("checkLogin");
    let user = listUsers.find((item) => item.idUser == checkLogin);
    let cartUser = user.cartUser;
    cartUser.splice(index, 1);
    localStorage.setItem("listUsers", JSON.stringify(listUsers));
    showCartProducts();
    showCartProductTotal();
    caculateTotalProductsPrice();
}

// Hàm tính tổng tiền sản phẩm có trong giỏ hàng

function caculateTotalProductsPrice() {
    let listUsers = JSON.parse(localStorage.getItem("listUsers"));
    let checkLogin = localStorage.getItem("checkLogin");
    let user = listUsers.find((item) => item.idUser == checkLogin);
    let cartUser = user.cartUser;
    let totalPrice = cartUser.reduce((total, currentValue) => {
        return total += currentValue.productPrice * currentValue.quantity;
    }, 0)
    document.querySelector(".cartProducts-subTotal").innerHTML = `SUBOTAL: ${USDollar.format(totalPrice)}`;
}

// Hàm kiểm tra xem đã đăng nhập hay chưa
function checkLogin() {
    let getIsLogin = localStorage.getItem("checkLogin");
    if (getIsLogin == null) {
        return false;
    } else {
        return true;
    }
}

// Hàm kiểm tra đã đăng xuất hay chưa
function checkLogout() {
    let confirmLogout = confirm("Bạn có muốn thoát không");
    if (confirmLogout) {
        localStorage.removeItem("checkLogin");
        window.location.href = "index.html";
        document.querySelector(".logout-button").style.visibility = "hidden";
    }
}

// Hàm thực thi phân trang

function pagination() {
    let thisPage = 1;
    let limit = 8;
    let list = document.querySelectorAll(".product-item");

    function loadItem() {
        let beginGet = limit * (thisPage - 1);
        let endGet = limit * thisPage - 1;
        list.forEach((item, key) => {
            if (key >= beginGet && key <= endGet) {
                item.style.display = 'block';
            } else {
                item.style.display = 'none';
            }
        })
        listPage();
    }
    loadItem();
    function listPage() {
        let count = Math.ceil(list.length / limit);
        document.querySelector('.listPage').innerHTML = '';

        if (thisPage != 1) {
            let prev = document.createElement('li');
            prev.innerText = 'PREV';
            prev.setAttribute('onclick', "changePage(" + (thisPage - 1) + ")");
            document.querySelector('.listPage').appendChild(prev);
        }

        for (i = 1; i <= count; i++) {
            let newPage = document.createElement('li');
            newPage.innerText = i;
            if (i == thisPage) {
                newPage.classList.add('active');
            }
            newPage.setAttribute('onclick', "changePage(" + i + ")");
            document.querySelector('.listPage').appendChild(newPage);
        }

        if (thisPage != count) {
            let next = document.createElement('li');
            next.innerText = 'NEXT';
            next.setAttribute('onclick', "changePage(" + (thisPage + 1) + ")");
            document.querySelector('.listPage').appendChild(next);
        }
    }
    function changePage(i) {
        thisPage = i;
        loadItem();
    }

    // Attach the changePage function to the global object
    window.changePage = changePage;
}

// Hàm chuyển đến trang thanh toán đơn hàng

document.querySelector(".cartProducts-checkout-btn").addEventListener("click", () => {
    document.querySelector(".cartProducts-container").style.display = "none";
    document.querySelector(".banner-container").style.display = "none";
    document.querySelector(".nagivation-container").style.opacity = 1;
    renderOrderedProductsList();
})

// Hàm hiển thị sản phẩm đã thêm vào giỏ hàng trong đơn hàng

function renderOrderedProductsList() {
    let listUsers = JSON.parse(localStorage.getItem("listUsers"));
    let checkLogin = localStorage.getItem("checkLogin");
    let user = listUsers.find((user) => {
        return user.idUser == checkLogin;
    })

    let cartUser = user.cartUser;
    let totalOrders = cartUser.reduce((total, currentValue) => {
        return total += currentValue.quantity;
    }, 0)

    let totalOrdersPrice = cartUser.reduce((total, currentValue) => {
        return total += currentValue.productPrice * currentValue.quantity;
    }, 0)

    let result = "";
    for (let i = 0; i < cartUser.length; i++) {
        result += `
            <div class="ordered-product">
                <div class="ordered-product-img">
                    <img src="${cartUser[i].imageLink}" alt="">
                </div>
                <p class="product-quantity">x${cartUser[i].quantity}</p>
            </div>
            `;
    }
    document.querySelector(".content-container").innerHTML = `
            <div class="checkout-container">
                    <div class="userInfo">
                        <h3>REGISTER A NEW ADDRESS</h3>
                        <div class="userInfo-form">
                            <div class="form-group">
                                <label for="firstname">FIRST NAME</label><br>
                                <input type="text" id="firstname" name="firstname" placeholder="Please enter your first name" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="lastname">LAST NAME</label><br>
                                <input type="text" id="lastname" name="lastname" placeholder="Please enter your last name" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="provice">PROVINCE</label><br>
                                <input type="text" id="province" name="province" placeholder="Please enter your provice" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="district">DISTRICT</label><br>
                                <input type="text" id="district" name="district" placeholder="Please enter your district" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="address">ADDRESS DETAILS</label><br>
                                <input id="address" name="address" type="text" placeholder="Apartment, suites, zones, buildings, floors etc" class="form-control"><br>
                            </div>
                            <div class="form-group">
                                <label for="phone">PHONE</label><br>
                                <input id="phone" name="phone" type="text" placeholder="Enter 10-11 numbers starting with 0" class="form-control"><br>
                            </div>
                            <div class="form-group">
                                <label for="mobilePhone">MOBILE PHONE</label><br>
                                <input id="mobilePhone" name="mobilePhone" type="text" placeholder="Enter 10-11 numbers starting with 0" class="form-control"><br>
                            </div>
                            <p>We may contact you by phone or email if we have questions about your order and shipping options.</p>
                            <input type="checkbox" class="showPassword">
                            <span>Use as billing address</span><br>
                            <button class="continue-checkout" onclick = "checkout()">CONTINUE CHECKOUT</button>
                        </div>
                    </div>
                    <div class="total-orders">
                        <div class="total-orders-detail">
                            <p class="total-orders-quantity">TOTAL ORDERS | ${totalOrders} PRODUCTS</p>
                            <p class="total-orders-price">TOTAL ${USDollar.format(totalOrdersPrice)}</p>
                            <p class="total-orders-tax">Value added tax included ${USDollar.format(0.05 * totalOrdersPrice)}</p>
                            <p class="total-orders-price-tax">TOTAL ORDERS ${USDollar.format(1.05 * totalOrdersPrice)}</p>
                        </div>
                        <div class="ordered-products">
                            ${result}
                        </div>
                    </div>
            </div>
        `;

    document.querySelector(".footer-container").classList.add("active-footer");
    let firstName = document.querySelector("#firstname");
    let lastName = document.querySelector("#lastname");
    let province = document.querySelector("#province");
    let district = document.querySelector("#district");
    let address = document.querySelector("#address");
    let phone = document.querySelector("#phone");
    let mobilePhone = document.querySelector("#mobilePhone");
    firstName.value = user.userInfo.firstName;
    lastName.value = user.userInfo.lastName;
    province.value = user.userInfo.province;
    district.value = user.userInfo.district;
    address.value = user.userInfo.address;
    phone.value = user.userInfo.phone;
    mobilePhone.value = user.userInfo.mobilePhone;
}


function validateUserInfo() {
    let firstName = document.querySelector("#firstname");
    let lastName = document.querySelector("#lastname");
    let province = document.querySelector("#province");
    let district = document.querySelector("#district");
    let address = document.querySelector("#address");
    let phone = document.querySelector("#phone");
    let mobilePhone = document.querySelector("#mobilePhone");
    let inputElement = document.getElementsByClassName("form-control");
    if (firstName.value == "" || lastName.value == "" || province.value == "" || district.value == "" || address.value == "") {
        for (let i = 0; i < inputElement.length; i++) {
            inputElement[i].classList.add("invalid");
        }
    } else {
        for (let i = 0; i < inputElement.length; i++) {
            inputElement[i].classList.remove("invalid");
        }
    }
    let userInfo = {
        firstName: firstName.value,
        lastName: lastName.value,
        province: province.value,
        district: district.value,
        address: address.value,
        phone: phone.value,
        mobilePhone: mobilePhone.value
    }
    let listProducts = JSON.parse(localStorage.getItem("listProducts"));
    let listUsers = JSON.parse(localStorage.getItem("listUsers"));
    let checkLogin = localStorage.getItem("checkLogin");
    let user = listUsers.find((user) => {
        return user.idUser == checkLogin;
    })

    user.userInfo = userInfo;
    localStorage.setItem("listUsers", JSON.stringify(listUsers));
}

function getInforProductInProductLocal(productId) {
    let listProducts = JSON.parse(localStorage.getItem("listProducts"));
    for (let i in listProducts) {
        if (listProducts[i].id == productId) {
            return listProducts[i];
        }
    }
    return false;
}

function validCart(cart, product) {
    for (let j in product.options) {
        for (let k in product.options[j].sizes) {
            if (product.options[j].sizes[k].key == cart.size) {
                if (cart.quantity > product.options[j].sizes[k].stock) {
                    return {
                        status: false,
                        name: product.name,
                        stock: product.options[j].sizes[k].stock
                    }
                }
            }
        }
    }
    return {
        status: true
    }
}

function validCartAndUpdateStore(cart, product) {
    for (let j in product.options) {
        for (let k in product.options[j].sizes) {
            if (product.options[j].sizes[k].key == cart.size) {
                product.options[j].sizes[k].stock -= cart.quantity;

                let productList = JSON.parse(localStorage.getItem("listProducts"));
                for (let i in productList) {
                    if (productList[i].id == product.id) {
                        productList[i] = product;
                        localStorage.setItem("listProducts", JSON.stringify(productList)); // save to local
                        console.log("da tru")
                        return;
                    }
                }
            }
        }
    }
}

function validateCartProduct() {
    // ...Các bước kiểm tra thông tin người dùng và lấy các giá trị cần thiết...
    let listProducts = JSON.parse(localStorage.getItem("listProducts"));
    let listUsers = JSON.parse(localStorage.getItem("listUsers"));
    let checkLogin = localStorage.getItem("checkLogin");
    let user = listUsers.find((user) => {
        return user.idUser == checkLogin;
    })
    let cartUser = user.cartUser;

    for (let i in cartUser) {
        let validValue = validCart(cartUser[i], getInforProductInProductLocal(cartUser[i].idProduct));
        if (!validValue.status) {
            alert("Mon hang " + validValue.name + " chi con: " + validValue.stock + " san pham");
            return
        }
    }

    // tru trong store

    for (let i in cartUser) {
        let validValue = validCart(cartUser[i], getInforProductInProductLocal(cartUser[i].idProduct));
        if (validValue.status) {
            validCartAndUpdateStore(cartUser[i], getInforProductInProductLocal(cartUser[i].idProduct));
            user.purchaseHistory.push([...cartUser]);
            cartUser.length = 0;
            localStorage.setItem("listUsers", JSON.stringify(listUsers));
        }
    }



    // ...Cập nhật thông tin người dùng và lưu vào localStorage...
}

function checkout() {
    console.log("checkout");
    validateCartProduct();
    validateUserInfo();
}












